<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Demo certification diplôme</title>
<!--
Short HTML Template
http://www.templatemo.com/tm-502-short
-->
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="apple-touch-icon" href="apple-touch-icon.png">

        <link rel="stylesheet" href="{{css_folder}}/bootstrap.min.css">
        <link rel="stylesheet" href="{{css_folder}}/bootstrap-theme.min.css">
        <link rel="stylesheet" href="{{css_folder}}/animate.min.css">
        <link rel="stylesheet" href="{{css_folder}}/easy-responsive-tabs.min.css">
        <link rel="stylesheet" href="{{css_folder}}/tabs.css">
        <link rel="stylesheet" href="{{css_folder}}/templatemo-style.css">

        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet">

        <script src="{{js_folder}}/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>

        <!-- Datepicker -->
        <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

    <!-- Laoding page  -->
    <div class="preloader">
      <div class="spinner">
        <div class="dot1"></div>
        <div class="dot2"></div>
      </div>
    </div>
    <!-- End Laoding page  -->

    <!-- Begin HorizontalTab style 6 -->
    <section class="section-full image-bg">

      <div class="container">

        <div class="row">

          <div class="col-md-12">

            <a href="index.html"><div class="responsive-logo hidden-lg hidden-md hidden-sm"><img src="{{img_folder}}/logo.png"></div></a>
            
            <!-- Begin .HorizontalTab -->
            <div class="VerticalTab VerticalTab_hash_scroll VerticalTab_6 tabs_ver_6">
            
              <ul class="resp-tabs-list hor_1">
                <a href="index.html"><div class="logo"><img src="{{img_folder}}/logo.png"></div></a>
                <li class="tabs-1" data-tab-name="home"><span class="tabs-text">Présentation</span></li>
                <li class="tabs-2" data-tab-name="school" id="school_button"><span class="tabs-text">Je suis une école</span></li>
                <li class="tabs-3" data-tab-name="verification" id="verif_button"><span class="tabs-text">Je veux vérifier un diplôme</span></li>
              </ul>
              
              <div class="resp-tabs-container hor_1 tabs_scroll">
                
                <div id="tabHome" class="fc-tab-1">
                
                  <div class="home-container">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="left-content">
                          <div class="left-line"></div>  
                          <h2>Bienvenue sur la démo de l'application</h2>
                          <p>Dirigez-vous en utilisant le menu de droite en fonction de ce que vous souhaitez faire. <br>
                          Si vous êtes une école, vous pourrez émettre un token par diplôme et l'envoyer vers l'adresse d'un élève, synonyme de votre validation de son diplôme. <br>
                          Si vous souhaitez vérifier la validité d'un diplôme, il vous suffira de flasher un QR code et l'ensemble des diplômes de la personne vous seront présentés.</p>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="right-content">
                          <img src="{{img_folder}}/home-image.jpg">
                        </div>
                      </div>
                    </div>
                  </div>
                  
                </div>
                
                <div id="tabSchool" class="fc-tab-2">
                
                  <div class="about-container">
                    <div class="row">
                      <div class="col-md-12">
                        <h2>Je suis une <em>école</em></h2>
                        {% if session["school_seed"] is defined %}
                            <p>Descerner un diplôme :</p>
                            <form method="post" action="award_degree">
                                <div class="form-group">
                                    <label>L'adresse de l'élève : </label>
                                    <input class="form-control" type="text" name="address" placeholder="GCFXHS4GXL6BVUCXBWXGTITROWLVYXQKQLF4YH5O5JT3YZXCYPAFBJZB" minlength="56" maxlength="56" size="56"/>
                                </div>
                                <div class="form-group">
                                    <label>Le nom du diplômé (sous la forme <em>prenomn1prenom2nomdefamille</em>) : </label>
                                    <input class="form-control" type="text" name="name" placeholder="jeanjacquespauldupont" />
                                </div>
                                <div class="form-group">
                                    <label>La date de naissance du diplômé : </label>
                                    <input class="form-control" placeholder="JJ//MM/AAAA" type="text" name="birthdate"/>
                                </div>
                                <div class="form-group">
                                    <label>L'année du décernement : </label>
                                    <input class="form-control" type="number" name="year" placeholder="YYYY" min="2010" max="2018">
                                </div>
                                <div id="awarderror" style="visibility:hidden">

                                </div>
                                {% if txhash is defined %}
                                    <div id="txhash" style="background-color:#a6ffa6; color:#108810">
                                        Diplôme descerné avec succès, voici le hash de la transaction : <br>
                                        <a href="https://stellar.expert/explorer/testnet/tx/{{ txhash }}" style="color:#108810">{{ txhash }}</a>
                                    </div>
                                    <div id="hashqrcode">
                                        <img src="{{ qrcode(txhash, icon_img='https://www.mes-etudes.com/uploads/media/school_logo/0001/02/thumb_1308_school_logo_retina.png') }}" style="width:50%;height:50%">
                                    </div>
                                {% endif %}
                                <button type="submit" class="btn btn-primary">Décerner</button>
                            </form>
                        {% else %}
                            <p>Connexion avec votre clef privée :<br></p>
                            <form method="post" action="/school_login">
                                <div id="groupSchoolLogin" class="form-group">
                                    <input class="form-control" type="password" name="secret" placeholder="SAV76USXIJOBMEQXPANUOQM6F5LIOTLPDIDVRJBFFE2MDJXG24TAPUU7" minlength="56" maxlength="56" size="56"/>
                                </div>
                                <button type="submit" class="btn btn-primary">Submit</button>
                            </form>
                            <img src="{{img_folder}}/about-image.png">
                        {% endif %}
                      </div>
                    </div>
                  </div>
                  
                </div>

                <div class="fc-tab-3">

                    <div class="about-container">
                        <div class="row">
                            <div class="col-md-12">
                                <h2>Je veux <em>vérifier</em> un diplôme</h2>
                                <br/>
                                {% if verif_passed == 1 %}
                                    <div id="verifpassed" style="background-color:#a6ffa6; color:#108810">
                                        <p>Le diplôme a bien été decerné à {{ name }}, né le {{ birthdate }}, en {{ year }} par l'école avec l'identifiant {{ id }}.</p>
                                    </div>
                                {% else %}
                                    <form action="check_degree" method="post" enctype=multipart/form-data>
                                        <p>Pour vérifier un diplôme, vous pouvez au choix :<br/></p>
                                        <div class="form-group">
                                            <label>
                                                <label style="display:inline-block; margin-right:10px;">Scanner le QRcode : </label><input type="file" name="txqr" accept="image/*" capture="environment" style="display:inline-block">
                                            </label>
                                        </div>
                                        <div class="form-group">
                                            <label>
                                                Entrer le hash de la transaction : <input type="text" name="txhash" placeholder="hash de la transaction" minlength="64" maxlength="64">
                                            </label>
                                        </div>
                                        <br>
                                        <p>Il faut aussi les informations du diplômé pour vérifier leur véracité</p>
                                        <br>
                                        <div class="form-group">
                                            <label>Le nom du diplômé (sous la forme <em>prenomn1prenom2nomdefamille</em>) : </label>
                                            <input class="form-control" type="text" name="name" placeholder="jeanjacquespauldupont" />
                                        </div>
                                        <div class="form-group">
                                            <label>La date de naissance du diplômé : </label>
                                            <input class="form-control" placeholder="JJ//MM/AAAA" type="text" name="birthdate"/>
                                        </div>
                                        <div class="form-group">
                                            <label>L'année du décernement : </label>
                                            <input class="form-control" type="number" name="year" placeholder="YYYY" min="2010" max="2018">
                                        </div>
                                        {% if veriferror is defined %}
                                            <div id="veriferror">
                                                {{ veriferror }}
                                            </div>
                                        {% endif %}
                                        <button type="submit" class="btn btn-primary">Vérifier</button>
                                    </form>
                                {% endif %}

                                <br>
                            </div>
                        </div>
                    </div>
                  </div>
                  
                </div>
                
                
              </div>
            </div>
            <!-- End .HorizontalTab -->
          
          </div>
          
        </div>
        
      </div>

    </section>
    <!-- End HorizontalTab style 6 -->
    
<!--
      <footer>
        <p>Copyright &copy; 2017 Your Company 
                                
        | Design: <a href="http://www.templatemo.com" target="_parent"><em>template mo</em></a></p>
      </footer>
    </div> <!-- /container -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="{{js_folder}}/vendor/jquery-1.11.2.min.js"><\/script>')</script>

        <script src="{{js_folder}}/vendor/bootstrap.min.js"></script>
        <script src="{{js_folder}}/plugins.js"></script>
        <script src="{{js_folder}}/main.js"></script>
        <script src="{{js_folder}}/jquery.nicescroll.min.js"></script>
        <script src="{{js_folder}}/easyResponsiveTabs.js"></script>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <!--
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X','auto');ga('send','pageview');
        </script>
        -->
        {% if school == 1 %}
    		<script>
                setTimeout(()=>document.getElementById('school_button').click(), 100)
    		</script>
        {% endif %}
        {% if verif == 1 %}
    		<script>
                setTimeout(()=>document.getElementById('verif_button').click(), 100)
    		</script>
        {% endif %}
        {% if session["school_seed"] is defined and formschoolerror == 1 %}
    		<script>
                setTimeout(()=>document.getElementById('groupSchoolLogin').classList.add('has-error'), 100)
    		</script>
        {% else %} <!-- Shown when it shouldn't -->
            <script>
                setTimeout(()=>{
                    div = document.getElementById('groupSchoolLogin').classList;
                    if(Array.from(div).includes('has-error'))
                        div.remove('has-error')
                    }, 100)
    		</script>
        {% endif %}
        {% if awarderror is defined %}
    		<script>
                setTimeout(()=>{
                    document.getElementById('awarderror').style.visibility = 'visible'
                    document.getElementById('awarderror').innerHTML = "Une erreur est survenue : <br>{{ awarderror }}"
                    }, 100)
    		</script>
        {% else %}
            <script>
                setTimeout(()=>{
                    document.getElementById('awarderror').style.visibility = 'hidden'
                    document.getElementById('awarderror').innerHTML = ""
                    }, 100)
    		</script>
        {% endif %}
        <!-- Snippet for datepicker -->
        <script>
            $(document).ready(function(){
              var date_input=$('input[name="birthdate"]'); //our date input has the name "date"
              var container=$('.bootstrap-iso form').length>0 ? $('.bootstrap-iso form').parent() : "body";
              var options={
                format: 'dd/mm/yyyy',
                startView: 2,
                container: container,
                todayHighlight: true,
                autoclose: true,
              };
              date_input.datepicker(options);
            })
        </script>
    </body>
</html>
